<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR-Code für Lagerbestandsseite</title>
  <link rel="stylesheet" href="QR code_fest weiterleitung.css"> <!-- Verknüpfung mit der CSS-Datei -->
</head>
<body>
  <div class="container">
    <h1>QR-Code für Lagerbestandsseite</h1>
    <div id="qrcode"></div>
    <p id="timestamp"></p>
    <button id="regenButton">Jetzt QR-Code neu generieren</button>
  </div>

  <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
  <script>
    // QR-Code Generierung und Zeitmanagement
    const generateQRCode = () => {
      const qrCodeContainer = document.getElementById("qrcode");
      const lagerBestandsURL = "https://example.com/lagerbestand"; // URL zur Lagerbestandsseite

      qrCodeContainer.innerHTML = ""; // Entferne alten QR-Code
      new QRCode(qrCodeContainer, {
        text: lagerBestandsURL,
        width: 200,
        height: 200,
      });

      const timestamp = new Date();
      updateTimestamp(timestamp);
    };

    // Aktualisiere die Anzeige der Zeit
    const updateTimestamp = (timestamp) => {
      const formattedTime = timestamp.toLocaleTimeString("de-DE", {
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
      });
      document.getElementById("timestamp").textContent = `Letzte Generierung: ${formattedTime}`;
    };

    // Timer, um alle 2 Stunden den QR-Code neu zu generieren
    const startQRCodeTimer = () => {
      generateQRCode(); // Initialer QR-Code
      setInterval(generateQRCode, 2 * 60 * 60 * 1000); // Alle 2 Stunden
    };

    // Manuelles Neu-Generieren durch Button
    document.getElementById("regenButton").addEventListener("click", () => {
      generateQRCode();
    });

    // Initialisieren
    window.onload = startQRCodeTimer;
  </script>
</body>
</html>
